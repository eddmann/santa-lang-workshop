FROM mcr.microsoft.com/dotnet/sdk:9.0

# Create non-root user
RUN groupadd -r dev && useradd -r -g dev dev

# Set working directory
WORKDIR /work

# Ensure dev user owns the work directory
RUN chown -R dev:dev /work

# Switch to non-root user
USER dev

# Set environment
ENV DOTNET_CLI_TELEMETRY_OPTOUT=1
ENV DOTNET_NOLOGO=1
ENV DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
ENV DOTNET_CLI_HOME=/work

# Verify F# 9 is available
RUN dotnet --version